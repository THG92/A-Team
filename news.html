<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./styles.css">
    <link rel="stylesheet" type="text/css" href="./news.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Londrina+Solid&display=swap" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
        <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    
        <!-- Add bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-night.min.css" rel="stylesheet">
    
        <!-- Custom style.css -->
        <link rel="stylesheet" href="style.css" type="text/css">
    
        <title>Summer ðŸ“° (Summary Bot)</title>
        <py-env>
            - asyncio
            - paths:
                - scripts/summer.py
        </py-env>

    <div class="topnav">

        <a href="./index.html">HOME</a>
        <a href="./contact.html">CONTACT</a>
        <a href="./about.html">ABOUT</a>
        <a class="active" href="./news.html">NEWS</a>
        <a href="./comingsoon.html">COMING SOON</a>
        
        <!-- <button class="signin">Sign In</button> -->
        <!-- <button class="glow-on-hover" type="button">Sign In</button> -->
        <!-- <button onclick = 'www.yoursite.com' class="glow-on-hover">Register</button> -->
        <button onclick="location.href='./login-register-buttons.html'" class="glow-on-hover" type="button">Register</button>
        <button onclick="location.href='./login-register-buttons.html'" class="glow-on-hover" type="button">Log In</button>
    
    </div>
</head>
<body>
    <div class="container">
        <h1 class="display-1 fw-bolder summer">Summer ðŸ“°</h1>
        <p class="lead">So we're not the smartest person in the room. Doesn't mean we can't try.</p>
        <section id="input">
            <py-inputbox id="topic">
            </py-inputbox>
            <small class="form-text text-muted">Need ideas? How about one of these: "MRI", "USDA", "NATO", "Nietzsche", "Paris Agreement"</small>
            <py-button id="submit" label="Summarize" class="mt-2">
                import asyncio
                from pyodide import create_proxy
                from summer import get_summary

                @create_proxy
                async def on_click(evt):
                    url = document.getElementById("topic").value
                    result = await get_summary(url)
                    pyscript.write("summary", result)
            </py-button>
            
        </section>
        <section id="summary" class="mt-4">
            <h6>Enter a keyword or a topic in the field above and let Summer ðŸ“° retrieve a summary ðŸ”Ž from Wikipedia in no time.</h6>
        </section>
        <button id="copy" class="btn btn-warning">Copy to ðŸ“‹ Clipboard</button>
    
        <hr />
        <footer class="footer">
            Source code for Summer is available on my github:
                <a href="https://github.com/onlyphantom/summer" target="_blank">@onlyphantom</a>.
        </footer>
    
    </div>  

    <script>
        document.getElementById("topic").focus()

        function copySummary(){
            let summaryText = document.getElementById("summary").innerText

            navigator.clipboard.writeText(summaryText).then(function(){
                console.log("Copied to clipboard!")
            }, 
                function(err){
                    console.log("Could not copy text")
                }
            )
        }

        let copyButton = document.getElementById("copy");
        copyButton.addEventListener("click", copySummary);

    </script>
        
</body>
</html>